C51 COMPILER V9.57.0.0   ________                                                          04/17/2019 13:22:31 PAGE 1   


C51 COMPILER V9.57.0.0, COMPILATION OF MODULE ________
OBJECT MODULE PLACED IN .\Objects\´úÂëÁ·Ï°.obj
COMPILER INVOKED BY: C:\Keil_v5\C51\BIN\C51.EXE D:\Á·Ï°\´úÂëÁ·Ï°.c OPTIMIZE(8,SPEED) BROWSE DEBUG OBJECTEXTEND PRINT(.\L
                    -istings\´úÂëÁ·Ï°.lst) TABS(2) OBJECT(.\Objects\´úÂëÁ·Ï°.obj)

line level    source

   1          //*****ææµ·_ä»£ç ç»ƒä¹ 
   2          
   3          #include  <stc15w.h>    //å•ç‰‡æœºå¤´æ–‡ä»¶
*** WARNING C318 IN LINE 3 OF D:\Á·Ï°\´úÂëÁ·Ï°.c: can't open file 'stc15w.h'
   4          
   5          /**************å®šä¹‰å®***************/
   6          #define   RCT_ENABLE  1 
   7          
   8          #define   LED_TYPE  0x00    //å…±é˜´æ•°ç ç®¡
   9          
  10          #define   Timer_Reload  (65536UL -(MAIN_Fosc / 1000))
  11          
  12          
  13          
  14          /**************æœ¬åœ°å¸¸é‡å£°æ˜***************/
  15          u8 code t_display[]={     //æ ‡å‡†å­—åº“
*** ERROR C129 IN LINE 15 OF D:\Á·Ï°\´úÂëÁ·Ï°.c: missing ';' before 'code'
  16            0x3F,0x06,0x5B,0x4F,0x66,0x6D,0x7D,0x07,0x7F,0x6F,0x77,0x7C,0x39,0x5E,0x79,0x71,
  17            0x00,0x40,0x76,0x1E,0x70,0x38,0x37,0x5C,0x73,0x3E,0x78,0x3d,0x67,0x50,0x37,0x6e,
  18            0xBF,0x86,0xDB,0xCF,0xE6,0xED,0xFD,0x87,0xFF,0xEF,0x46
  19          }ï¼›
  20          
  21          
  22          u8 code T_COM[]={
  23            0x01,0x02,0x04,0x08,0x10,0x20,0x40,0x80
  24          };                //ä½ç 
  25          
  26          
  27          /**************IOå£å®šä¹‰***********/
  28          sbit  P_HC595_SER   = P4^0;
  29          sbit  P_HC595_RCLK  = P5^4;
  30          sbit  P_HC595_SRCLK = P4^3;
  31          
  32          /*************  æœ¬åœ°å˜é‡å£°æ˜  **************/
  33          u8  LED8[8];    //æ˜¾ç¤ºç¼“å†²
  34          u8  shu;      //æ˜¾ç¤ºä½ç´¢å¼•
  35          bit B_1ms;      //1msæ ‡å¿—
  36          
  37          u16 msecond;
  38          
  39          /************* æœ¬åœ°å˜é‡å£°æ˜  *********/
  40          
  41          /*************  åŠ æ³•  ****************/
  42          void RTC(void)
  43          {
  44            if(++shu >= 9)  shu = 0;
  45          }
  46          
  47          /*************  æ˜¾ç¤º  ****************/
  48          void  DisplayRTC(void)
  49          {
  50            u8 i = 0;
  51            for(i = 0 ; i < 8 ; i++)  LED[i] = shu;
  52          }
C51 COMPILER V9.57.0.0   ________                                                          04/17/2019 13:22:31 PAGE 2   

  53          
  54          /**************  æ˜¾ç¤ºå‡½æ•°  ************/
  55          void  display(void)
  56          {
  57            u8 x=0;
  58            for(,x<8,++x)
  59            {
  60              LED[x] = x;
  61            }
  62          }
  63          
  64          
  65          /*********  ä¸»å‡½æ•°  **********/
  66          int main (void)
  67          {
  68            shu = 0;
  69            
  70            Timer0_1T();
  71            Timer0_AsTimer();
  72            Timer0_16bitAutoReload();
  73            Timer0_Load(Timer0_Reload);
  74            Timer0_InterruptEnable();
  75            Timer0_Run();
  76            EA = 1; 
  77            
  78            for(i=0; i<8; i++)  LED8[i] = i;  //æ˜¾ç¤º01234567
  79            
  80            while(1)
  81            {
  82              if(B_1ms)
  83              {
  84                B_1ms =0;
  85                if(++msecond >= 1000)
  86                {
  87                  msecond = 0;
  88                  RTC();
  89                  DisplayRTC();
  90                }
  91              }
  92            }
  93          }
  94          
  95          /**************** å‘HC595å‘é€ä¸€ä¸ªå­—èŠ‚å‡½æ•° ******************/
  96          void Send_595(u8 dat)
  97          {   
  98            u8  i;
  99            for(i=0; i<8; i++)
 100            {
 101              dat <<= 1;
 102              P_HC595_SER   = CY;
 103              P_HC595_SRCLK = 1;
 104              P_HC595_SRCLK = 0;
 105            }
 106          }
 107          
 108          /********************** æ˜¾ç¤ºæ‰«æå‡½æ•° ************************/
 109          void DisplayScan(void)
 110          { 
 111            Send_595(~LED_TYPE ^ T_COM[display_index]);       //è¾“å‡ºä½ç 
 112            Send_595( LED_TYPE ^ t_display[LED8[display_index]]); //è¾“å‡ºæ®µç 
 113          
 114            P_HC595_RCLK = 1;
C51 COMPILER V9.57.0.0   ________                                                          04/17/2019 13:22:31 PAGE 3   

 115            P_HC595_RCLK = 0;             //é”å­˜è¾“å‡ºæ•°æ®
 116            if(++display_index >= 8)  display_index = 0;  //8ä½ç»“æŸå›0
 117          }
 118          
 119          /********************** Timer0 1msä¸­æ–­å‡½æ•° ************************/
 120          void timer0 (void) interrupt TIMER0_VECTOR
 121          {
 122            DisplayScan();  //1msæ‰«ææ˜¾ç¤ºä¸€ä½
 123            B_1ms = 1;    //1msæ ‡å¿—
 124            
 125          }

C51 COMPILATION COMPLETE.  1 WARNING(S),  1 ERROR(S)
